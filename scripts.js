const translations = {
    es: {
        nav: {
            'sobre-mi': 'Sobre mí',
            'experiencia': 'Experiencia',
            'proyectos': 'Proyectos',
            'mision-vision': 'Misión y Visión',
            'contacto': 'Contacto',
            'langBtn': 'ES'
        },
        sobreMi: {
            title: 'Sobre mí',
            text: `Ingeniero en Desarrollo de Software con más de 4 años de experiencia en soporte técnico en el Sistema Educativo Saint Clare. Durante este tiempo, he desarrollado habilidades sólidas en redes, servidores (locales y en la nube), sistemas de telefonía, cámaras y soporte de primer nivel en equipos como impresoras, parlantes y conexiones de red. También he brindado soporte técnico en entornos audiovisuales, incluyendo sistemas de sonido para eventos y transmisiones en vivo.
      
Actualmente curso una pasantía como ingeniero en desarrollo de software en Moody’s, donde aplico tecnologías como C#, .NET y Kafka, fortaleciendo mis habilidades en programación backend y desarrollo de soluciones empresariales. Me caracteriza un enfoque autodidacta, orientado a la mejora continua y a la resolución efectiva de problemas técnicos.`
        },
        experiencia: {
            title: 'Experiencia',
            saintClare: {
                company: 'Asociación Sistema Educativo Saint Clare',
                role: 'Soporte Técnico',
                duties: [
                    'Administración de servidores y usuarios en Active Directory y Azure AD.',
                    'Automatización de procesos con Power Automate.',
                    'Soporte técnico, telecomunicaciones, redes y sistemas HikVision.'
                ]
            },
            moodys: {
                company: 'Moody’s',
                role: 'Pasante de Desarrollo Back-End',
                duties: [
                    'Desarrollo de APIs con C# y .NET Core.',
                    'Ingesta de datos en tiempo real con Kafka y Flink en Java.',
                    'Participación en microservicios y metodologías ágiles (SCRUM).'
                ]
            }
        },
        proyectos: {
            title: 'Proyectos',
            ruralAnimal: {
                title: 'RuralAnimal',
                text: 'Sistema web llamado Rural Animal, creado para necesidades Agropecuarias, los usuarios pueden ofertar o subastar sus animales, visualizar en 3D, reservar citas por medio de un chat con IA.',
                repo: 'Ver repositorio'
            },
            simepci: {
                title: 'SIMEPCI',
                text: 'Proyecto de sitio web para la agenda de citas de atención médica.',
                repo: 'Ver repositorio'
            },
            p5js: {
                title: 'Proyecto P5JS',
                text: 'Proyecto personal de investigación del Creative Coding con el uso de circunferencias y el plano cartesiano en JavaScript.',
                repo: 'Ver código'
            }
        },
        misionVision: {
            title: 'Misión y Visión',
            mision: {
                title: 'Misión',
                text: 'Diseñar y desarrollar soluciones tecnológicas que combinen lógica, creatividad e innovación, creando sistemas robustos que respondan a los desafíos reales de manera eficiente y original. Mi propósito es generar valor a través del pensamiento técnico y la imaginación aplicada.'
            },
            vision: {
                title: 'Visión',
                text: 'Ser un profesional referente en el desarrollo de software backend, reconocido por fusionar la tecnología con la creatividad para construir soluciones innovadoras, escalables y funcionales que transformen la forma en que las personas interactúan con los sistemas.'
            }
        },
        contacto: {
            title: 'Contacto',
            nombre: 'Nombre',
            correo: 'Correo electrónico',
            mensaje: 'Mensaje',
            enviar: 'Enviar'
        },
        footer: {
            github: 'GitHub',
            linkedin: 'LinkedIn',
            copyright: '© 2025 Ronald Picado'
        },
        slogan: "Donde la tecnología se encuentra con la imaginación",
        downloadCV: {
            text: "Descargar CV"
        }
    },
    en: {
        nav: {
            'sobre-mi': 'About Me',
            'experiencia': 'Experience',
            'proyectos': 'Projects',
            'mision-vision': 'Mission and Vision',
            'contacto': 'Contact',
            'langBtn': 'EN'
        },
        sobreMi: {
            title: 'About Me',
            text: `Software Development Engineer with over 4 years of experience in technical support at the Saint Clare Educational System. During this time, I have developed strong skills in networks, servers (both on-premises and cloud), telephony systems, cameras, and first-level support for devices such as printers, speakers, and network connections. I have also provided technical support in audiovisual environments, including sound systems for events and live broadcasts.
      
I am currently doing a software engineering internship at Moody’s, where I work with technologies like C#, .NET, and Kafka, strengthening my skills in backend programming and enterprise solution development. I am characterized by a self-taught mindset, continuous improvement focus, and effective technical problem-solving.`
        },
        experiencia: {
            title: 'Experience',
            saintClare: {
                company: 'Saint Clare Educational System Association',
                role: 'Technical Support',
                duties: [
                    'Administration of servers and users in Active Directory and Azure AD.',
                    'Process automation with Power Automate.',
                    'Technical support, telecommunications, networks, and HikVision systems.'
                ]
            },
            moodys: {
                company: 'Moody’s',
                role: 'Back-End Development Intern',
                duties: [
                    'API development with C# and .NET Core.',
                    'Real-time data ingestion with Kafka and Flink in Java.',
                    'Participation in microservices and agile methodologies (SCRUM).'
                ]
            }
        },
        proyectos: {
            title: 'Projects',
            ruralAnimal: {
                title: 'RuralAnimal',
                text: 'Web system called Rural Animal, created for agricultural needs. Users can sell or auction their animals, view them in 3D, and book appointments through an AI-powered chat.',
                repo: 'View repository'
            },
            simepci: {
                title: 'SIMEPCI',
                text: 'Website project for medical appointment scheduling.',
                repo: 'View repository'
            },
            p5js: {
                title: 'P5JS Project',
                text: 'Personal research project on Creative Coding using circles and Cartesian plane in JavaScript.',
                repo: 'View code'
            }
        },
        misionVision: {
            title: 'Mission and Vision',
            mision: {
                title: 'Mission',
                text: 'Design and develop technological solutions that combine logic, creativity, and innovation, building robust systems that address real-world challenges efficiently and originally. My purpose is to generate value through technical thinking and applied imagination.'
            },
            vision: {
                title: 'Vision',
                text: 'To be a leading backend software development professional, recognized for merging technology and creativity to build innovative, scalable, and functional solutions that transform the way people interact with systems.'
            }
        },
        contacto: {
            title: 'Contact',
            nombre: 'Name',
            correo: 'Email',
            mensaje: 'Message',
            enviar: 'Send'
        },
        footer: {
            github: 'GitHub',
            linkedin: 'LinkedIn',
            copyright: '© 2025 Ronald Picado'
        },
        slogan: "Where technology meets imagination",
        downloadCV: {
            text: "Download CV"
        }
    }
};

function scrollCarousel(direction) {
    const carousel = document.getElementById('carousel');
    const card = carousel.querySelector('div');
    const cardWidth = card.offsetWidth + 24; // + gap between cards (24px)
    carousel.scrollBy({ left: direction * cardWidth, behavior: 'smooth' });
}

let currentIndex = 0;

function updateCarousel() {
    const cards = document.querySelectorAll('.carousel-card');
    const total = cards.length;

    cards.forEach((card, index) => {
        const offset = index - currentIndex;

        // Reset styles first
        card.style.transition = 'all 0.7s ease';
        card.style.position = 'absolute';

        // Active card
        if (offset === 0) {
            card.style.zIndex = 10;
            card.style.opacity = 1;
            card.style.transform = 'translateX(0) scale(1)';
        }
        // Left card
        else if (offset === -1 || (currentIndex === 0 && index === total - 1)) {
            card.style.zIndex = 5;
            card.style.opacity = 0.5;
            card.style.transform = 'translateX(-380px) scale(0.85)';
        }
        // Right card
        else if (offset === 1 || (currentIndex === total - 1 && index === 0)) {
            card.style.zIndex = 5;
            card.style.opacity = 0.5;
            card.style.transform = 'translateX(380px) scale(0.85)';
        }
        // Hidden cards (not visible in carousel of 3)
        else {
            card.style.opacity = 0;
            card.style.transform = 'scale(0)';
            card.style.zIndex = 1;
        }
    });
}


function changeSlide(direction) {
    const cards = document.querySelectorAll('.carousel-card');
    const total = cards.length;
    currentIndex = (currentIndex + direction + total) % total;
    updateCarousel();
}

window.onload = updateCarousel;



let currentLang = localStorage.getItem("lang") || 'es';

function switchLanguage() {
    currentLang = currentLang === 'es' ? 'en' : 'es';
    localStorage.setItem("lang", currentLang);
    applyTranslations();
}

function applyTranslations() {
    const t = translations[currentLang];

    // Navigation
    document.querySelectorAll('nav a').forEach(a => {
        const href = a.getAttribute('href').replace('#', '');
        if (t.nav[href]) a.innerText = t.nav[href];
    });
    document.getElementById('lang-btn').innerText = t.nav.langBtn;

    // Actualizar slogan
    const slogan = document.getElementById('slogan-text');
    slogan.innerText = t.slogan;

    // Actualizar texto y link del botón descargar CV
    const downloadBtn = document.getElementById('download-cv-btn');
    downloadBtn.innerText = t.downloadCV.text;
    downloadBtn.href = currentLang === 'es' ? 'resources/CVEspaniol.pdf' : 'resources/CVIngles.pdf';

    // Sobre mí
    document.querySelector('#sobre-mi h1').innerText = t.sobreMi.title;
    document.querySelector('#sobre-mi p').innerHTML = t.sobreMi.text;

    // Experiencia
    document.querySelector('#experiencia h2').innerText = t.experiencia.title;

    // Renderizar experiencia detallada
    const experienciaList = document.getElementById('experiencia-list');
    if (experienciaList) {
        experienciaList.innerHTML = ''; // limpiar contenido previo

        // Iterar cada experiencia
        ['saintClare', 'moodys'].forEach(key => {
            const exp = t.experiencia[key];
            if (!exp) return;

            const container = document.createElement('div');
            container.classList.add('experience-item', 'mb-6');

            const company = document.createElement('h3');
            company.classList.add('text-h3', 'font-semibold');
            company.innerText = exp.company;
            container.appendChild(company);

            const role = document.createElement('p');
            role.classList.add('font-medium', 'italic', 'mb-2');
            role.innerText = exp.role;
            container.appendChild(role);

            const ul = document.createElement('ul');
            ul.classList.add('list-disc', 'list-inside');
            exp.duties.forEach(duty => {
                const li = document.createElement('li');
                li.innerText = duty;
                ul.appendChild(li);
            });
            container.appendChild(ul);

            experienciaList.appendChild(container);
        });
    } else {
        // Si no existe contenedor, puedes mostrar un texto simple
        const expParagraph = document.querySelector('#experiencia p');
        if (expParagraph) expParagraph.innerText = t.experiencia.text;
    }

    // Proyectos
    document.querySelector('#proyectos h2').innerText = t.proyectos.title;

    // Actualizar cards de proyecto (asumiendo data-index 0,1,2)
    const cards = document.querySelectorAll('#carousel-3d .carousel-card');
    if (cards.length >= 3) {
        // Card 0 - RuralAnimal
        cards[0].querySelector('h3').innerText = t.proyectos.ruralAnimal.title;
        cards[0].querySelector('p').innerText = t.proyectos.ruralAnimal.text;
        const link0 = cards[0].querySelector('a');
        link0.innerText = t.proyectos.ruralAnimal.repo;
        link0.href = "https://github.com/atorress91/rural-animal-frontend";

        // Card 1 - SIMEPCI
        cards[1].querySelector('h3').innerText = t.proyectos.simepci.title;
        cards[1].querySelector('p').innerText = t.proyectos.simepci.text;
        const link1 = cards[1].querySelector('a');
        link1.innerText = t.proyectos.simepci.repo;
        link1.href = "#";  // O pon aquí el enlace correcto si tienes

        // Card 2 - Proyecto P5JS
        cards[2].querySelector('h3').innerText = t.proyectos.p5js.title;
        cards[2].querySelector('p').innerText = t.proyectos.p5js.text;
        const link2 = cards[2].querySelector('a');
        link2.innerText = t.proyectos.p5js.repo;
        link2.href = "https://editor.p5js.org/ronytrox/sketches/RjLve4QaD";
    }

    // Misión y Visión
    document.querySelector('#mision-vision h2').innerText = t.misionVision.title;
    document.querySelector('#mision-vision h3').innerText = t.misionVision.mision.title;
    document.querySelector('#mision-vision .mb-4 p').innerText = t.misionVision.mision.text;
    document.querySelector('#mision-vision div:last-child h3').innerText = t.misionVision.vision.title;
    document.querySelector('#mision-vision div:last-child p').innerText = t.misionVision.vision.text;

    // Contacto
    document.querySelector('#contacto h2').innerText = t.contacto.title;
    const inputs = document.querySelectorAll('#contacto input, #contacto textarea');
    inputs[0].placeholder = t.contacto.nombre;
    inputs[1].placeholder = t.contacto.correo;
    inputs[2].placeholder = t.contacto.mensaje;
    document.querySelector('#contacto button').innerText = t.contacto.enviar;

    // Footer
    const footerLinks = document.querySelectorAll('footer a span');
    footerLinks[0].innerText = t.footer.github;
    footerLinks[1].innerText = t.footer.linkedin;
    document.querySelector('footer p').innerText = t.footer.copyright;
}


document.addEventListener("DOMContentLoaded", () => {
    applyTranslations();
});

// Inicializar EmailJS
(function(){
    emailjs.init({
        publicKey: "TUuGdYD1XRdtZ5OLp"
    });
})();

document.getElementById("contact-form").addEventListener("submit", function(e) {
    e.preventDefault();

    const formStatus = document.getElementById("form-status");
    formStatus.innerText = currentLang === 'es' ? "Enviando..." : "Sending...";

    // Enviar el formulario
    emailjs.sendForm("service_w3e3zt7", "template_4ds7uew", this)
        .then(() => {
            formStatus.style.color = "green";
            formStatus.innerText = currentLang === 'es'
                ? "Mensaje enviado correctamente"
                : "Message sent successfully";
            this.reset();
        })
        .catch((error) => {
            console.error("Error:", error);
            formStatus.style.color = "red";
            formStatus.innerText = currentLang === 'es'
                ? "Error al enviar el mensaje"
                : "Error sending message";
        });
});


